<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tariff Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 600px;
      margin: 20px auto;
      padding: 15px;
      border: 1px solid #ccc;
      border-radius: 8px;
    }
    h1 {
      text-align: center;
    }
    label {
      display: block;
      margin-top: 10px;
    }
    input, select {
      width: 100%;
      padding: 6px;
      margin-top: 2px;
    }
    button {
      margin-top: 15px;
      padding: 10px;
      width: 100%;
      font-size: 15px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    #result {
      margin-top: 20px;
      font-weight: bold;
      font-size: 16px;
      text-align: center;
    }
    .note, .footer, .how-it-works {
      font-size: 11px;
      color: #555;
      margin-top: 10px;
      text-align: center;
    }
  </style>
</head>
<body>
  <h1>Tariff Calculator</h1>

  <label for="countrySelect">Select Country</label>
  <select id="countrySelect" onchange="populateFields()">
    <option value="">--Select a Country--</option>
    <option value="vietnam">Vietnam</option>
    <option value="china">China</option>
    <option value="cambodia">Cambodia</option>
    <option value="lesotho">Lesotho</option>
    <option value="laos">Laos</option>
    <option value="myanmar">Myanmar</option>
    <option value="srilanka">Sri Lanka</option>
    <option value="mauritius">Mauritius</option>
    <option value="botswana">Botswana</option>
    <option value="serbia">Serbia</option>
    <option value="thailand">Thailand</option>
    <option value="guyana">Guyana</option>
    <option value="bosnia">Bosnia and Herzegovina</option>
    <option value="taiwan">Taiwan</option>
    <option value="switzerland">Switzerland</option>
    <option value="northmacedonia">North Macedonia</option>
    <option value="indonesia">Indonesia</option>
  </select>

  <label for="countryGDP">Country GDP per Capita (USD)</label>
  <input type="number" id="countryGDP" />

  <label for="ppiGap">PPI Gap (0 - 1)</label>
  <input type="number" step="0.01" id="ppiGap" placeholder="e.g. 0.546" />

  <label for="delta">Delta (δ)</label>
  <input type="number" step="0.01" id="delta" value="0.25" />

  <label for="existingTariff">Existing Tariff Offset (%)</label>
  <input type="number" id="existingTariff" />

  <button onclick="calculateTariff()">Calculate Adjusted Tariff</button>

  <div id="result"></div>
  <div class="note">*U.S. GDP per capita fixed at $65,000 (2024)</div>

  <div class="footer">
    <p><strong>Sources:</strong></p>
    <ul style="text-align:left; font-size: 11px; padding-left: 20px;">
      <li>IMF World Economic Outlook Database, 2024</li>
      <li>World Bank PPP Index</li>
      <li>WTO Tariff Profiles</li>
      <li>USTR Market Access Reports</li>
      <li>Reuters, Goldman Sachs Tariff Watch (April 2025)</li>
    </ul>
  </div>

  <div class="how-it-works">
    This calculator determines an adjusted tariff rate based on GDP per capita, Purchasing Power Index gap (PPI Gap), and existing tariff offset. Country presets populate fields automatically using available 2024–2025 economic data. Delta (δ) lets users adjust for fairness based on development gap sensitivity.
  </div>

  <script>
    const countryData = {
      vietnam: { gdp: 4300, ppi: 0.546, tariff: 9.4 },
      china: { gdp: 12600, ppi: 0.68, tariff: 8.0 },
      cambodia: { gdp: 1700, ppi: 0.63, tariff: 7.9 },
      lesotho: { gdp: 1100, ppi: 0.58, tariff: 10.6 },
      laos: { gdp: 2600, ppi: 0.62, tariff: 8.3 },
      myanmar: { gdp: 1400, ppi: 0.61, tariff: 5.7 },
      srilanka: { gdp: 3800, ppi: 0.59, tariff: 7.5 },
      mauritius: { gdp: 10400, ppi: 0.71, tariff: 1.3 },
      botswana: { gdp: 7600, ppi: 0.69, tariff: 5.6 },
      serbia: { gdp: 7800, ppi: 0.70, tariff: 6.4 },
      thailand: { gdp: 7600, ppi: 0.69, tariff: 6.3 },
      guyana: { gdp: 9500, ppi: 0.72, tariff: 13.0 },
      bosnia: { gdp: 7200, ppi: 0.68, tariff: 7.5 },
      taiwan: { gdp: 32000, ppi: 0.89, tariff: 1.7 },
      switzerland: { gdp: 83000, ppi: 0.95, tariff: 1.7 },
      northmacedonia: { gdp: 6100, ppi: 0.67, tariff: 6.1 },
      indonesia: { gdp: 4500, ppi: 0.65, tariff: 5.3 }
    };

    function populateFields() {
      const selected = document.getElementById('countrySelect').value;
      const data = countryData[selected];
      if (data) {
        document.getElementById('countryGDP').value = data.gdp;
        document.getElementById('ppiGap').value = data.ppi;
        document.getElementById('existingTariff').value = data.tariff;
      }
    }

    function calculateTariff() {
      const countryGDP = parseFloat(document.getElementById('countryGDP').value);
      const ppiGap = parseFloat(document.getElementById('ppiGap').value);
      const delta = parseFloat(document.getElementById('delta').value);
      const existingTariff = parseFloat(document.getElementById('existingTariff').value);

      const usGDP = 65000;
      const devGap = 1 - (countryGDP / usGDP);
      const baseRate = (ppiGap + devGap) / 2;
      const adjusted = (baseRate * (1 - (devGap * delta))) * 100;
      const finalTariff = adjusted - existingTariff;

      document.getElementById('result').textContent = `Adjusted Tariff: ${finalTariff.toFixed(2)}%`;
    }
  </script>
</body>
</html>
